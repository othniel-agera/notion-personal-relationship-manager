{"version":3,"file":"order.spec.js","sourceRoot":"","sources":["../../src/test/order.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  app,\n  request,\n  expect,\n  OrderModel,\n  CartModel,\n  UserModel,\n} from \"./common.spec\";\n\ndescribe(\"/api\", () => {\n  //So Id add authentication and try to signin before all the request and send the\n  //token and be authenticated\n  let cartId = \"0\";\n  let userId = \"0\";\n  before(async () => {\n    const user = new UserModel({\n      username: \"otagera\",\n      password: 12345678,\n      email: \"string\",\n      address: \"string\",\n      firstname: \"string\",\n      lastname: \"string\",\n    });\n    await user.save();\n    userId = user._id;\n  });\n  describe(\"post /order/checkout\", () => {\n    it(\"should checkout an order\", async function () {\n      this.timeout(100000);\n      const res = await request(app)\n        .post(\"/api/order/checkout\")\n        .send({\n          email: \"otagera@gmail.com\",\n          products: [\n            { PartNumber: \"C000065S048A\", quantity: 2 },\n            { PartNumber: \"N000082L124A\", quantity: 2 },\n            { PartNumber: \"SG00PL3030AA\", quantity: 2 },\n            { PartNumber: \"SG00PL3030AAd\", quantity: 1 },\n          ],\n          callback_url: \"www.google.com\",\n        });\n      expect(res.status).to.equal(200);\n      expect(res.body.data.length).not.equal(0);\n      expect(res.body.data.message).equal(\"Order checked out\");\n    });\n  });\n  describe(\"get /order/verify\", () => {\n    it(\"should unsuccessfully find order\", async function () {\n      this.timeout(100000);\n      const ress = await request(app)\n        .post(\"/api/order/checkout\")\n        .send({\n          email: \"otagera@gmail.com\",\n          products: [\n            { PartNumber: \"C000065S048A\", quantity: 2 },\n            { PartNumber: \"N000082L124A\", quantity: 2 },\n            { PartNumber: \"SG00PL3030AA\", quantity: 2 },\n            { PartNumber: \"SG00PL3030AAd\", quantity: 1 },\n          ],\n          callback_url: \"www.google.com\",\n        });\n      const res = await request(app).get(\n        `/api/order/verify/${ress.body.data.order.paymentRef}d`\n      );\n      const { data } = res.body;\n      expect(res.status).to.equal(200);\n      expect(data.length).not.equal(0);\n      expect(data.message).equal(\"Order not found\");\n    });\n    it(\"should unsuccessfully verify an order payment\", async function () {\n      this.timeout(100000);\n      const ress = await request(app)\n        .post(\"/api/order/checkout\")\n        .send({\n          email: \"otagera@gmail.com\",\n          products: [\n            { PartNumber: \"C000065S048A\", quantity: 2 },\n            { PartNumber: \"N000082L124A\", quantity: 2 },\n            { PartNumber: \"SG00PL3030AA\", quantity: 2 },\n            { PartNumber: \"SG00PL3030AAd\", quantity: 1 },\n          ],\n          callback_url: \"www.google.com\",\n        });\n      const res = await request(app).get(\n        `/api/order/verify/${ress.body.data.order.paymentRef}`\n      );\n      const { data } = res.body;\n      expect(res.status).to.equal(200);\n      expect(data.length).not.equal(0);\n      expect(data.message).equal(\"Order verification unsuccessful\");\n    });\n    it(\"should successfully verify an order payment\", async function () {\n      this.timeout(100000);\n      const ress = await request(app)\n        .post(\"/api/order/checkout\")\n        .send({\n          email: \"otagera@gmail.com\",\n          products: [\n            { PartNumber: \"C000065S048A\", quantity: 2 },\n            { PartNumber: \"N000082L124A\", quantity: 2 },\n            { PartNumber: \"SG00PL3030AA\", quantity: 2 },\n            { PartNumber: \"SG00PL3030AAd\", quantity: 1 },\n          ],\n          callback_url: \"www.google.com\",\n        });\n      console.log(ress.body.data.authorization_url);\n      setTimeout(async () => {\n        const res = await request(app).get(\n          `/api/order/verify/${ress.body.data.order.paymentRef}`\n        );\n        const { data } = res.body;\n        expect(res.status).to.equal(200);\n        expect(data.length).not.equal(0);\n        expect(data.message).equal(\"Order verification successful\");\n        await OrderModel.deleteMany();\n      }, 30000);\n    });\n  });\n  describe(\"post /cart\", () => {\n    it(\"should not find user\", async function () {\n      await CartModel.deleteMany({});\n      this.timeout(100000);\n      const res = await request(app)\n        .post(\"/api/cart\")\n        .send({\n          userId: \"629551832fbf1068266f5cb6\",\n          products: [\n            { productId: \"recGvUezjm2KUtCdc\", quantity: 2 },\n            { productId: \"recESnRz5hSsHYFAO\", quantity: 12 },\n            { productId: \"recIwhNICRFecriHn\", quantity: 5 },\n            { productId: \"recKsJ9EvLq5VOIAR\", quantity: 1 },\n          ],\n        });\n      const { data } = res.body;\n      expect(res.status).to.equal(404);\n      expect(data.message).equal(\"User does not exist\");\n    });\n    it(\"should add items to cart\", async function () {\n      await CartModel.deleteMany({});\n      this.timeout(100000);\n      const res = await request(app)\n        .post(\"/api/cart\")\n        .send({\n          userId,\n          products: [\n            { productId: \"recGvUezjm2KUtCdc\", quantity: 2 },\n            { productId: \"recESnRz5hSsHYFAO\", quantity: 12 },\n            { productId: \"recIwhNICRFecriHn\", quantity: 5 },\n            { productId: \"recKsJ9EvLq5VOIAR\", quantity: 1 },\n          ],\n        });\n      const { data } = res.body;\n      expect(res.status).to.equal(201);\n      expect(data.length).not.equal(0);\n      expect(data.message).equal(\"Products successfully added to cart\");\n    });\n    it(\"should edit amount if product already in cart\", async function () {\n      this.timeout(100000);\n      const addRes = await request(app)\n        .post(\"/api/cart\")\n        .send({\n          userId,\n          products: [\n            { productId: \"recGvUezjm2KUtCdc\", quantity: 2 },\n            { productId: \"recESnRz5hSsHYFAO\", quantity: 12 },\n            { productId: \"recIwhNICRFecriHn\", quantity: 5 },\n            { productId: \"recKsJ9EvLq5VOIAR\", quantity: 1 },\n          ],\n        });\n      const res = await request(app)\n        .post(\"/api/cart\")\n        .send({\n          userId,\n          products: [\n            { productId: \"recGvUezjm2KUtCdc\", quantity: 4 },\n            { productId: \"recESnRz5hSsHYFAO\", quantity: 12 },\n            { productId: \"recKsJ9EvLq5VOIAR\", quantity: 13 },\n            {\n              productId: \"recLuFdNG1DVRxZPo\",\n              quantity: 33,\n            },\n          ],\n        });\n      const { data } = res.body;\n      expect(res.status).to.equal(200);\n      expect(data.length).not.equal(0);\n      expect(data.message).equal(\"Products successfully edited to cart\");\n    });\n  });\n  describe(\"GET /carts\", () => {\n    beforeEach(async function () {\n      this.timeout(50000);\n      await CartModel.deleteMany({});\n      const t = await request(app)\n        .post(\"/api/cart\")\n        .send({\n          userId,\n          products: [\n            { productId: \"recGvUezjm2KUtCdc\", quantity: 2 },\n            { productId: \"recESnRz5hSsHYFAO\", quantity: 12 },\n            { productId: \"recIwhNICRFecriHn\", quantity: 5 },\n            { productId: \"recKsJ9EvLq5VOIAR\", quantity: 1 },\n          ],\n        });\n      // console.log(t);\n    });\n    it(\"should return all cart items\", async function () {\n      this.timeout(100000);\n      const res = await request(app).get(\"/api/carts\");\n      const { data } = res.body;\n      cartId = data.carts[0]._id;\n      expect(res.status).to.equal(200);\n      expect(data.carts.length).equal(1);\n      expect(data.message).equal(\"Retrieved carts successfully\");\n    });\n  });\n  describe(\"GET /cart\", () => {\n    it(\"should return cart by id\", async function () {\n      const res = await request(app).get(`/api/cart/${cartId}`);\n      const { data } = res.body;\n      expect(res.status).to.equal(200);\n      expect(data.message).to.equal(\"Cart retrieved successfully\");\n    });\n\n    it(\"should find cart\", async function () {\n      const generateId = () => {\n        var timestamp = ((new Date().getTime() / 1000) | 0).toString(16);\n        return (\n          timestamp +\n          \"xxxxxxxxxxxxxxxx\"\n            .replace(/[x]/g, function () {\n              return ((Math.random() * 16) | 0).toString(16);\n            })\n            .toLowerCase()\n        );\n      };\n      const res = await request(app).get(`/api/cart/${generateId()}`);\n      const { data } = res.body;\n      expect(res.status).to.equal(404);\n      expect(data.message).to.equal(\"Cart not found\");\n    });\n\n    it(\"should say not found because of invalid cart id\", async function () {\n      const res = await request(app).get(`/api/cart/${\"fjhrywhd\"}`);\n      const { data } = res.body;\n      expect(res.status).to.equal(404);\n      expect(data.message).to.equal(\"Invalid cart Id\");\n    });\n  });\n  describe(\"Delete /cart/:id/:productId\", () => {\n    it(\"should delete cart item by id\", async function () {\n      const res = await request(app).del(\n        `/api/cart/${cartId}/recESnRz5hSsHYFAO`\n      );\n      const { data } = res.body;\n      expect(res.status).to.equal(200);\n      expect(data.message).to.equal(\"Cart item deleted successfully\");\n      // expect(data.cart.acknowledged).to.equal(true);\n    });\n\n    it(\"should not find cart to delete\", async function () {\n      const generateId = () => {\n        var timestamp = ((new Date().getTime() / 1000) | 0).toString(16);\n        return (\n          timestamp +\n          \"xxxxxxxxxxxxxxxx\"\n            .replace(/[x]/g, function () {\n              return ((Math.random() * 16) | 0).toString(16);\n            })\n            .toLowerCase()\n        );\n      };\n      const res = await request(app).del(\n        `/api/cart/${generateId()}/recESnRz5hSsHYFAO`\n      );\n      const { data } = res.body;\n      expect(res.status).to.equal(404);\n      expect(data.message).to.equal(\"Cart by that id not found\");\n    });\n\n    it(\"should not find cart to delete because of invalid cart id\", async function () {\n      const res = await request(app).del(\n        `/api/cart/${\"fjhrywhd/recESnRz5hSsHYFAO\"}`\n      );\n      const { data } = res.body;\n      expect(res.status).to.equal(404);\n      expect(data.message).to.equal(\"Invalid cart Id\");\n    });\n  });\n  describe(\"Delete /cart/:id\", () => {\n    it(\"should delete cart by id\", async function () {\n      const res = await request(app).del(`/api/cart/${cartId}`);\n      const { data } = res.body;\n      expect(res.status).to.equal(200);\n      expect(data.message).to.equal(\"Cart deleted successfully\");\n      expect(data.cart.acknowledged).to.equal(true);\n      expect(data.cart.deletedCount).to.equal(1);\n    });\n\n    it(\"should not find cart to delete\", async function () {\n      const generateId = () => {\n        var timestamp = ((new Date().getTime() / 1000) | 0).toString(16);\n        return (\n          timestamp +\n          \"xxxxxxxxxxxxxxxx\"\n            .replace(/[x]/g, function () {\n              return ((Math.random() * 16) | 0).toString(16);\n            })\n            .toLowerCase()\n        );\n      };\n      const res = await request(app).del(`/api/cart/${generateId()}`);\n      const { data } = res.body;\n      expect(res.status).to.equal(404);\n      expect(data.message).to.equal(\"Cart by that id not found\");\n      expect(data.cart.acknowledged).to.equal(true);\n      expect(data.cart.deletedCount).to.equal(0);\n    });\n\n    it(\"should not find cart to delete because of invalid cart id\", async function () {\n      const res = await request(app).del(`/api/cart/${\"fjhrywhd\"}`);\n      const { data } = res.body;\n      expect(res.status).to.equal(404);\n      expect(data.message).to.equal(\"Invalid cart Id\");\n    });\n  });\n});\n"]}